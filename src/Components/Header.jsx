import { onAuthStateChanged, signOut } from 'firebase/auth';
import React, { useEffect, useState } from 'react'
import { Col, Container, Nav, Navbar, Row } from 'react-bootstrap'
import { auth } from '../firebase';
import { Link, useNavigate } from "react-router-dom";
import { useAuthState } from "react-firebase-hooks/auth";
import logo from '../assets/logo.png'

function Header({insideHome}) {
  const [user] = useAuthState(auth);
  const navigate = useNavigate();
  const handleLogout = async () => {
    try {
      await signOut(auth);
      alert("You have been logged out.");
      navigate("/")
      
    } catch (error) {
      console.error("Error logging out:", error);
      alert("Failed to log out. Try again.");
    }
  };

  // height={"45px"} width={"120px"}
  // 

  return (

    <>
      <div className="row">
        <div className="col-sm-1"></div>
        <div className="col-sm-9">
        <Navbar  expand="lg" variant="dark" className='ms-5'>
      <Container className='headerItems'>
        <Link to={'/home'} style={{textDecoration:'none'}}><Navbar.Brand style={{backgroundColor: "transparent",paddingLeft:'24px',marginLeft:'0'}} className='headerLogo'>
        <svg width="103" height="38" viewBox="0 0 103 38" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_78_635)">
            <path d="M3.48705 6.73644C3.95866 6.75226 4.4381 6.76175 4.92695 6.76175C10.5362 6.76175 17.2045 5.68153 23.077 3.79787C23.9011 3.53375 24.357 2.6449 24.0954 1.81141C23.8337 0.979502 22.9516 0.519263 22.1275 0.783386C16.067 2.72714 9.13855 3.77099 3.59516 3.57645C2.73184 3.54798 2.00484 4.22964 1.97507 5.10267C1.9453 5.97571 2.62216 6.70798 3.48705 6.73803V6.73644Z" fill="#C9C9C9"/>
            <path d="M15.8197 16.3176C16.6313 16.0156 17.0481 15.1061 16.7488 14.2869C16.4495 13.4676 15.5486 13.0485 14.737 13.349C12.7894 14.0734 10.809 14.5146 9.02752 14.7756L10.4549 9.33655C10.6758 8.49198 10.1776 7.62686 9.34088 7.40228C8.5042 7.17769 7.64715 7.68222 7.42466 8.52678L5.6996 15.0982C4.20955 15.1678 3.12375 15.1156 2.72735 15.0698C2.2338 14.9685 1.70108 15.1093 1.31564 15.492C0.698317 16.1041 0.690482 17.1068 1.29841 17.7284C1.78412 18.2266 2.2855 18.2424 3.49665 18.2788C3.73481 18.2867 4.0231 18.2914 4.3584 18.2914C4.51665 18.2914 4.6843 18.2914 4.86292 18.2867L0.751589 33.9522C0.530667 34.7968 1.02892 35.6619 1.8656 35.8865C2.00034 35.9229 2.13509 35.9403 2.26827 35.9403C2.96237 35.9403 3.59536 35.4721 3.78181 34.7636L8.16107 18.0795C10.317 17.8439 13.0527 17.3472 15.8212 16.3176H15.8197Z" fill="#C9C9C9"/>
            <path d="M101.542 5.49807C100.681 5.40001 99.9057 6.02315 99.8086 6.89144C99.8055 6.91516 99.5344 9.29227 98.8795 11.9145C98.8121 12.1834 98.7447 12.4396 98.6774 12.6863C98.6539 12.7528 98.6335 12.8208 98.6178 12.8935C98.6178 12.8999 98.6147 12.9046 98.6147 12.9109C97.579 16.5612 96.4963 17.7031 96.0545 18.0337C95.2288 18.6505 93.7011 19.5757 92.7642 18.8371C91.5013 17.8407 91.1363 14.3786 92.6028 10.8138C92.935 10.0071 92.5558 9.08192 91.7567 8.74663C90.9576 8.41134 90.0411 8.79408 89.7089 9.60068C89.231 10.7616 88.9004 11.9319 88.7093 13.0707C88.4727 13.1418 88.2596 13.2668 88.0841 13.4328C87.6971 13.6764 86.4358 14.3011 85.5083 14.3944C84.6966 14.4767 84.2125 14.1983 84.0307 14.0655C83.954 13.9469 83.86 13.8377 83.7534 13.7428C83.7142 13.1323 83.6312 12.5393 83.4965 11.9746C82.9387 9.62599 81.6273 7.99854 79.8019 7.39122C76.2562 6.21294 72.1339 9.41722 70.4135 14.687C70.3618 14.8484 70.3117 15.0081 70.2647 15.1678C70.2647 15.1678 70.2631 15.1694 70.2616 15.171C69.8745 15.4146 68.6133 16.0393 67.6857 16.1326C66.9415 16.2069 66.4746 15.9808 66.263 15.84C66.2756 14.899 66.1847 13.9911 65.9841 13.145C65.4263 10.7964 64.1149 9.16891 62.2896 8.56159C58.7454 7.38173 54.6216 10.5876 52.9012 15.8574C52.8448 16.0298 52.7931 16.2022 52.743 16.3746C52.2667 16.6482 51.1307 17.1859 50.2752 17.2729C49.5733 17.3441 49.1158 17.1448 48.8886 17.004C48.887 16.1358 48.793 15.2959 48.6066 14.5115C48.0488 12.1628 46.7374 10.5354 44.9104 9.92807C43.0835 9.32074 41.0702 9.84266 39.2401 11.3958C37.6216 12.7702 36.3008 14.8404 35.5221 17.2239C34.8609 19.2515 34.6666 21.2443 34.8781 22.9982C34.853 23.0251 34.828 23.052 34.8045 23.0805C33.5103 24.6889 31.0112 26.8604 29.6841 26.7513C29.5368 26.7387 29.1937 26.7118 28.7816 25.9874C27.5376 23.8017 30.01 18.2219 32.1628 14.9606C32.5718 14.3423 32.5483 13.5309 32.1033 12.9378C31.6583 12.3447 30.8906 12.1012 30.1902 12.3289C29.2736 12.6278 27.3668 13.251 25.5979 13.5246C24.1736 13.746 23.3479 13.6685 22.8826 13.5436C22.9484 13.1165 23.0157 12.6927 23.0815 12.2767C23.221 11.4148 22.6413 10.6018 21.7874 10.4611C20.9334 10.3219 20.1281 10.9055 19.9886 11.7674C19.8946 12.351 19.8022 12.9473 19.7082 13.5515C19.6815 13.7239 19.6549 13.8962 19.6283 14.0686C19.5578 14.2695 19.5264 14.4799 19.5311 14.6902C18.7509 19.6453 17.7512 25.0306 14.8981 28.6033C14.3544 29.2834 14.4609 30.2782 15.1346 30.827C15.4245 31.0627 15.7723 31.1766 16.117 31.1766C16.5746 31.1766 17.0289 30.9757 17.3376 30.5882C20.3192 26.8541 21.5116 21.8247 22.331 16.9993C23.749 17.2951 25.4271 17.148 27.1741 16.7826C26.9578 17.2286 26.7416 17.6984 26.5332 18.1855C24.7753 22.3039 24.5214 25.5145 25.7812 27.7256C26.8717 29.6409 28.3539 30.1438 29.4068 30.2308C29.5274 30.2403 29.6465 30.245 29.7672 30.245C32.2506 30.245 34.7089 28.2238 36.1942 26.7228C36.8476 27.6686 37.7156 28.3693 38.7748 28.722C39.2715 28.8864 39.7822 28.9687 40.2993 28.9687C41.6828 28.9687 43.1117 28.3851 44.4451 27.2543C46.0636 25.8799 47.3844 23.8096 48.1632 21.4261C48.2916 21.0323 48.4013 20.6369 48.4953 20.2415C48.9387 20.3696 49.437 20.4487 49.9869 20.4487C50.1796 20.4487 50.3802 20.4392 50.5855 20.4187C51.1291 20.3633 51.676 20.2273 52.1758 20.0628C52.1225 23.604 53.5796 26.503 56.1524 27.3586C56.649 27.5231 57.1598 27.6054 57.6784 27.6054C59.0619 27.6054 60.4909 27.0218 61.8242 25.8909C63.4428 24.5165 64.7636 22.4463 65.5423 20.0628C65.6488 19.7354 65.7429 19.4065 65.8259 19.0775C66.2912 19.2198 66.8161 19.31 67.399 19.31C67.5917 19.31 67.7922 19.3005 67.9975 19.2799C68.5788 19.2214 69.1616 19.068 69.6881 18.8893C69.6348 22.432 71.0904 25.3311 73.6647 26.1883C74.1614 26.3528 74.6721 26.435 75.1908 26.435C76.1606 26.435 77.154 26.1471 78.1207 25.5841C76.8876 29.1664 75.3866 32.4165 73.8981 33.5252C72.8985 34.2701 71.9474 34.5232 71.2204 34.2369C70.5185 33.9601 69.9827 33.1788 69.7837 32.1461C69.6192 31.2889 68.7981 30.7274 67.9489 30.8935C67.0997 31.0595 66.5435 31.8883 66.708 32.7455C67.1107 34.8522 68.372 36.5112 70.0814 37.185C70.6501 37.4096 71.2455 37.5203 71.8534 37.5203C73.1335 37.5203 74.4747 37.03 75.7595 36.0716C77.8026 34.5485 79.6766 31.0548 81.4878 25.3943C82.7663 21.3961 83.509 17.8454 83.5403 17.6968C83.567 17.5687 83.5748 17.4421 83.5717 17.3172C84.0542 17.4738 84.6058 17.575 85.2231 17.575C85.4158 17.575 85.6164 17.5655 85.8216 17.5449C86.8479 17.4406 87.8851 17.0467 88.5933 16.7241C88.8283 18.6963 89.5867 20.3459 90.8354 21.3328C91.6282 21.9576 92.5715 22.2818 93.5915 22.2818C93.7873 22.2818 93.9863 22.2691 94.1884 22.2454C94.8386 22.1679 95.5093 21.9639 96.1955 21.6381C94.975 25.1413 93.5037 28.2918 92.0434 29.3799C91.0438 30.1248 90.0928 30.3779 89.3658 30.0916C88.6638 29.8148 88.1264 29.0335 87.929 28.0008C87.7645 27.1435 86.9435 26.5821 86.0942 26.7481C85.245 26.9142 84.6888 27.743 84.8533 28.6002C85.256 30.7068 86.5173 32.3659 88.2267 33.0397C88.7954 33.2642 89.3908 33.375 89.9987 33.375C91.2788 33.375 92.62 32.8847 93.9048 31.9262C95.948 30.4032 97.8219 26.9095 99.6331 21.249C100.767 17.7015 101.48 14.5083 101.648 13.7286C102.51 10.7109 102.861 7.81983 102.923 7.25678C103.021 6.3885 102.403 5.60562 101.543 5.50756L101.542 5.49807ZM45.1878 20.4377C44.5971 22.2454 43.5928 23.8475 42.4302 24.8344C41.476 25.6442 40.5014 25.9669 39.7572 25.7185C38.1747 25.1919 37.2706 21.9797 38.5006 18.2124C39.0913 16.4046 40.0956 14.8025 41.2582 13.8156C42.0024 13.1845 42.7576 12.8492 43.4079 12.8492C43.5912 12.8492 43.7682 12.8761 43.9312 12.9315C44.6754 13.1798 45.2692 14.0228 45.5591 15.2469C45.9132 16.7383 45.7769 18.6299 45.1878 20.4377ZM62.5653 19.0712C61.9747 20.8789 60.9703 22.4811 59.8077 23.468C58.8536 24.2777 57.879 24.6004 57.1348 24.3521C55.5523 23.8254 54.6482 20.6132 55.8782 16.8459C56.9796 13.4708 59.1967 11.4812 60.7839 11.4812C60.9688 11.4812 61.1442 11.5081 61.3103 11.5634C62.0546 11.8117 62.6484 12.6547 62.9382 13.8789C63.2923 15.3703 63.156 17.2618 62.5669 19.0696L62.5653 19.0712ZM77.3201 22.2976C76.3659 23.1074 75.3913 23.43 74.6471 23.1817C73.0646 22.655 72.1605 19.4428 73.3905 15.6755C74.492 12.3004 76.709 10.3108 78.2962 10.3108C78.4811 10.3108 78.6566 10.3377 78.8226 10.3931C79.5669 10.6414 80.1607 11.4843 80.4506 12.7085C80.8047 14.1999 80.6684 16.0915 80.0792 17.8992C79.4885 19.707 78.4842 21.3091 77.3216 22.296L77.3201 22.2976Z" fill="#C9C9C9"/>
          </g>
          <defs>
            <clipPath id="clip0_78_635">
              <rect width="103" height="38" fill="white"/>
            </clipPath>
          </defs>
        </svg>

</Navbar.Brand></Link>
      {insideHome&&(
        <>
        <Navbar.Toggle aria-controls="basic-navbar-nav" />
      
        <Navbar.Collapse id="basic-navbar-nav">
         
          <Nav className="text-center">
            
              <Nav.Link  className='navElements me-4 mb-1'>
                <Link to={'/home'} style={{textDecoration:'none',color:'white'}}>Home</Link>
              </Nav.Link>

              <div className="container ps-0 " style={{backgroundColor:'transparent',width:'50%'}}>
                <hr style={{color:'white',height:'3px'}}/>
              </div>     

              <Nav.Link  className='navElements me-4 mb-1'>
                <Link to={'/budget'} style={{textDecoration:'none',color:'white'}}>Budget</Link>
              </Nav.Link>

              <div className="container ps-0 " style={{backgroundColor:'transparent',width:'50%'}}>
                <hr style={{color:'white',height:'3px'}}/>
              </div>  
            
              <Nav.Link  className='navElements me-4 mb-1'>
                <Link to={'/expenses'} style={{textDecoration:'none',color:'white'}}>Expenses</Link>
              </Nav.Link>

              <div className="container ps-0 " style={{backgroundColor:'transparent',width:'50%'}}>
                <hr style={{color:'white',height:'3px'}}/>
              </div>  

              <Nav.Link  className='navElements me-4 mb-1'>
                <Link to={'/savings'} style={{textDecoration:'none',color:'white'}}>Savings</Link>
              </Nav.Link>

              <div className="container ps-0 " style={{backgroundColor:'transparent',width:'50%'}}>
                <hr style={{color:'white',height:'3px'}}/>
              </div>  

          </Nav>
          <Nav className='navElements text-center  mt-2' >
            <div className='action-button' style={{backgroundColor:"transparent",marginLeft:'-20px'}}>
              <button className='btn border border-1 ps-3 pe-3 pt-2 pb-2 ms-0' onClick={handleLogout} style={{backgroundColor:'transparent'}}>Logout</button>
            </div>
          </Nav> 
        
        
        </Navbar.Collapse></> ) 
      } 
      </Container>
    </Navbar>
        </div>
        <div className="col-sm-2">
        <Navbar.Collapse id="basic-navbar-nav">
        <Nav className='ms-auto ' >
            <div className='logout-button' style={{backgroundColor:"transparent"}}>
              <button className='btn border border-1 ps-3 pe-3 pt-2 pb-2' onClick={handleLogout} >Logout</button>
            </div>
        </Nav>
        </Navbar.Collapse> 
      
        </div>
      </div>

      
    </>
  )
}

export default Header
