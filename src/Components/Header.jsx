import { onAuthStateChanged, signOut } from 'firebase/auth';
import React, { useEffect, useState } from 'react'
import { Col, Container, Nav, Navbar, Row } from 'react-bootstrap'
import { auth } from '../firebase';
import { Link, useNavigate } from "react-router-dom";
import { useAuthState } from "react-firebase-hooks/auth";
import logo from '../assets/logo.png'

function Header({insideHome}) {
  const [user] = useAuthState(auth);
  const navigate = useNavigate();
  const handleLogout = async () => {
    try {
      await signOut(auth);
      alert("You have been logged out.");
      navigate("/")
      
    } catch (error) {
      console.error("Error logging out:", error);
      alert("Failed to log out. Try again.");
    }
  };

  // height={"45px"} width={"120px"}
  // 

  return (

    <>
      <div className="row">
        <div className="col-sm-1"></div>
        <div className="col-sm-9">
        <Navbar  expand="lg" variant="dark" className='ms-5'>
      <Container className='headerItems'>
        <Link to={'/home'} style={{textDecoration:'none'}}><Navbar.Brand style={{backgroundColor: "transparent"}} className='headerLogo'>
          <svg width="126" height="50" viewBox="0 0 126 50" fill="none" xmlns="http://www.w3.org/2000/svg" style={{left:"0"}}>
            <path d="M13.487 12.7364C13.9587 12.7523 14.4381 12.7617 14.9269 12.7617C20.5362 12.7617 27.2045 11.6815 33.077 9.79787C33.9011 9.53375 34.357 8.6449 34.0954 7.81141C33.8337 6.9795 32.9516 6.51926 32.1275 6.78339C26.067 8.72714 19.1386 9.77099 13.5952 9.57645C12.7318 9.54798 12.0048 10.2296 11.9751 11.1027C11.9453 11.9757 12.6222 12.708 13.487 12.738V12.7364Z" fill="#C9C9C9"/>
            <path d="M25.8197 22.3176C26.6313 22.0156 27.0481 21.1061 26.7488 20.2869C26.4495 19.4676 25.5486 19.0485 24.737 19.349C22.7894 20.0734 20.809 20.5146 19.0275 20.7756L20.4549 15.3365C20.6758 14.492 20.1776 13.6269 19.3409 13.4023C18.5042 13.1777 17.6472 13.6822 17.4247 14.5268L15.6996 21.0982C14.2096 21.1678 13.1237 21.1156 12.7273 21.0698C12.2338 20.9685 11.7011 21.1093 11.3156 21.492C10.6983 22.1041 10.6905 23.1068 11.2984 23.7284C11.7841 24.2266 12.2855 24.2424 13.4967 24.2788C13.7348 24.2867 14.0231 24.2914 14.3584 24.2914C14.5166 24.2914 14.6843 24.2914 14.8629 24.2867L10.7516 39.9522C10.5307 40.7968 11.0289 41.6619 11.8656 41.8865C12.0003 41.9229 12.1351 41.9403 12.2683 41.9403C12.9624 41.9403 13.5954 41.4721 13.7818 40.7636L18.1611 24.0795C20.317 23.8439 23.0527 23.3472 25.8212 22.3176H25.8197Z" fill="#C9C9C9"/>
            <path d="M111.542 11.4981C110.681 11.4 109.906 12.0232 109.809 12.8914C109.805 12.9152 109.534 15.2923 108.879 17.9145C108.812 18.1834 108.745 18.4396 108.677 18.6863C108.654 18.7528 108.633 18.8208 108.618 18.8935C108.618 18.8999 108.615 18.9046 108.615 18.9109C107.579 22.5612 106.496 23.7031 106.055 24.0337C105.229 24.6505 103.701 25.5757 102.764 24.8371C101.501 23.8407 101.136 20.3786 102.603 16.8138C102.935 16.0071 102.556 15.0819 101.757 14.7466C100.958 14.4113 100.041 14.7941 99.7089 15.6007C99.231 16.7616 98.9004 17.9319 98.7093 19.0707C98.4727 19.1418 98.2596 19.2668 98.0841 19.4328C97.6971 19.6764 96.4358 20.3011 95.5083 20.3944C94.6966 20.4767 94.2125 20.1983 94.0307 20.0655C93.954 19.9469 93.86 19.8377 93.7534 19.7428C93.7142 19.1323 93.6312 18.5393 93.4965 17.9746C92.9387 15.626 91.6273 13.9985 89.8019 13.3912C86.2562 12.2129 82.1339 15.4172 80.4135 20.687C80.3618 20.8484 80.3117 21.0081 80.2647 21.1678C80.2647 21.1678 80.2631 21.1694 80.2616 21.171C79.8745 21.4146 78.6133 22.0393 77.6857 22.1326C76.9415 22.2069 76.4746 21.9808 76.263 21.84C76.2756 20.899 76.1847 19.9911 75.9841 19.145C75.4263 16.7964 74.1149 15.1689 72.2896 14.5616C68.7454 13.3817 64.6216 16.5876 62.9012 21.8574C62.8448 22.0298 62.7931 22.2022 62.743 22.3746C62.2667 22.6482 61.1307 23.1859 60.2752 23.2729C59.5733 23.3441 59.1158 23.1448 58.8886 23.004C58.887 22.1358 58.793 21.2959 58.6066 20.5115C58.0488 18.1628 56.7374 16.5354 54.9104 15.9281C53.0835 15.3207 51.0702 15.8427 49.2401 17.3958C47.6216 18.7702 46.3008 20.8404 45.5221 23.2239C44.8609 25.2515 44.6666 27.2443 44.8781 28.9982C44.853 29.0251 44.828 29.052 44.8045 29.0805C43.5103 30.6889 41.0112 32.8604 39.6841 32.7513C39.5368 32.7387 39.1937 32.7118 38.7816 31.9874C37.5376 29.8017 40.01 24.2219 42.1628 20.9606C42.5718 20.3423 42.5483 19.5309 42.1033 18.9378C41.6583 18.3447 40.8906 18.1012 40.1902 18.3289C39.2736 18.6278 37.3668 19.251 35.5979 19.5246C34.1736 19.746 33.3479 19.6685 32.8826 19.5436C32.9484 19.1165 33.0157 18.6927 33.0815 18.2767C33.221 17.4148 32.6413 16.6018 31.7874 16.4611C30.9334 16.3219 30.1281 16.9055 29.9886 17.7674C29.8946 18.351 29.8022 18.9473 29.7082 19.5515C29.6815 19.7239 29.6549 19.8962 29.6283 20.0686C29.5578 20.2695 29.5264 20.4799 29.5311 20.6902C28.7509 25.6453 27.7512 31.0306 24.8981 34.6033C24.3544 35.2834 24.4609 36.2782 25.1346 36.827C25.4245 37.0627 25.7723 37.1766 26.117 37.1766C26.5746 37.1766 27.0289 36.9757 27.3376 36.5882C30.3192 32.8541 31.5116 27.8247 32.331 22.9993C33.749 23.2951 35.4271 23.148 37.1741 22.7826C36.9578 23.2286 36.7416 23.6984 36.5332 24.1855C34.7753 28.3039 34.5214 31.5145 35.7812 33.7256C36.8717 35.6409 38.3539 36.1438 39.4068 36.2308C39.5274 36.2403 39.6465 36.245 39.7672 36.245C42.2506 36.245 44.7089 34.2238 46.1942 32.7228C46.8476 33.6686 47.7156 34.3693 48.7748 34.722C49.2715 34.8864 49.7822 34.9687 50.2993 34.9687C51.6828 34.9687 53.1117 34.3851 54.4451 33.2543C56.0636 31.8799 57.3844 29.8096 58.1632 27.4261C58.2916 27.0323 58.4013 26.6369 58.4953 26.2415C58.9387 26.3696 59.437 26.4487 59.9869 26.4487C60.1796 26.4487 60.3802 26.4392 60.5855 26.4187C61.1291 26.3633 61.676 26.2273 62.1758 26.0628C62.1225 29.604 63.5796 32.503 66.1524 33.3586C66.649 33.5231 67.1598 33.6054 67.6784 33.6054C69.0619 33.6054 70.4909 33.0218 71.8242 31.8909C73.4428 30.5165 74.7636 28.4463 75.5423 26.0628C75.6488 25.7354 75.7429 25.4065 75.8259 25.0775C76.2912 25.2198 76.8161 25.31 77.399 25.31C77.5917 25.31 77.7922 25.3005 77.9975 25.2799C78.5788 25.2214 79.1616 25.068 79.6881 24.8893C79.6348 28.432 81.0904 31.3311 83.6647 32.1883C84.1614 32.3528 84.6721 32.435 85.1908 32.435C86.1606 32.435 87.154 32.1471 88.1207 31.5841C86.8876 35.1664 85.3866 38.4165 83.8981 39.5252C82.8985 40.2701 81.9474 40.5232 81.2204 40.2369C80.5185 39.9601 79.9827 39.1788 79.7837 38.1461C79.6192 37.2889 78.7981 36.7274 77.9489 36.8935C77.0997 37.0595 76.5435 37.8883 76.708 38.7455C77.1107 40.8522 78.372 42.5112 80.0814 43.185C80.6501 43.4096 81.2455 43.5203 81.8534 43.5203C83.1335 43.5203 84.4747 43.03 85.7595 42.0716C87.8026 40.5485 89.6766 37.0548 91.4878 31.3943C92.7663 27.3961 93.509 23.8454 93.5403 23.6968C93.567 23.5687 93.5748 23.4421 93.5717 23.3172C94.0542 23.4738 94.6058 23.575 95.2231 23.575C95.4158 23.575 95.6164 23.5655 95.8216 23.5449C96.8479 23.4406 97.8851 23.0467 98.5933 22.7241C98.8283 24.6963 99.5867 26.3459 100.835 27.3328C101.628 27.9576 102.571 28.2818 103.591 28.2818C103.787 28.2818 103.986 28.2691 104.188 28.2454C104.839 28.1679 105.509 27.9639 106.196 27.6381C104.975 31.1413 103.504 34.2918 102.043 35.3799C101.044 36.1248 100.093 36.3779 99.3658 36.0916C98.6638 35.8148 98.1264 35.0335 97.929 34.0008C97.7645 33.1435 96.9435 32.5821 96.0942 32.7481C95.245 32.9142 94.6888 33.743 94.8533 34.6002C95.256 36.7068 96.5173 38.3659 98.2267 39.0397C98.7954 39.2642 99.3908 39.375 99.9987 39.375C101.279 39.375 102.62 38.8847 103.905 37.9262C105.948 36.4032 107.822 32.9095 109.633 27.249C110.767 23.7015 111.48 20.5083 111.648 19.7286C112.51 16.7109 112.861 13.8198 112.923 13.2568C113.021 12.3885 112.403 11.6056 111.543 11.5076L111.542 11.4981ZM55.1878 26.4377C54.5971 28.2454 53.5928 29.8475 52.4302 30.8344C51.476 31.6442 50.5014 31.9669 49.7572 31.7185C48.1747 31.1919 47.2706 27.9797 48.5006 24.2124C49.0913 22.4046 50.0956 20.8025 51.2582 19.8156C52.0024 19.1845 52.7576 18.8492 53.4079 18.8492C53.5912 18.8492 53.7682 18.8761 53.9312 18.9315C54.6754 19.1798 55.2692 20.0228 55.5591 21.2469C55.9132 22.7383 55.7769 24.6299 55.1878 26.4377ZM72.5653 25.0712C71.9747 26.8789 70.9703 28.4811 69.8077 29.468C68.8536 30.2777 67.879 30.6004 67.1348 30.3521C65.5523 29.8254 64.6482 26.6132 65.8782 22.8459C66.9796 19.4708 69.1967 17.4812 70.7839 17.4812C70.9688 17.4812 71.1442 17.5081 71.3103 17.5634C72.0546 17.8117 72.6484 18.6547 72.9382 19.8789C73.2923 21.3703 73.156 23.2618 72.5669 25.0696L72.5653 25.0712ZM87.3201 28.2976C86.3659 29.1074 85.3913 29.43 84.6471 29.1817C83.0646 28.655 82.1605 25.4428 83.3905 21.6755C84.492 18.3004 86.709 16.3108 88.2962 16.3108C88.4811 16.3108 88.6566 16.3377 88.8226 16.3931C89.5669 16.6414 90.1607 17.4843 90.4506 18.7085C90.8047 20.1999 90.6684 22.0915 90.0792 23.8992C89.4885 25.707 88.4842 27.3091 87.3216 28.296L87.3201 28.2976Z" fill="#C9C9C9"/>
          </svg>
</Navbar.Brand></Link>
      {insideHome&&(
        <>
        <Navbar.Toggle aria-controls="basic-navbar-nav" />
      
        <Navbar.Collapse id="basic-navbar-nav">
         
          <Nav className="text-center">
            
              <Nav.Link  className='navElements me-4 mb-1'>
                <Link to={'/home'} style={{textDecoration:'none',color:'white'}}>Home</Link>
              </Nav.Link>

              <div className="container ps-0 " style={{backgroundColor:'transparent',width:'50%'}}>
                <hr style={{color:'white',height:'3px'}}/>
              </div>     

              <Nav.Link  className='navElements me-4 mb-1'>
                <Link to={'/budget'} style={{textDecoration:'none',color:'white'}}>Budget</Link>
              </Nav.Link>

              <div className="container ps-0 " style={{backgroundColor:'transparent',width:'50%'}}>
                <hr style={{color:'white',height:'3px'}}/>
              </div>  
            
              <Nav.Link  className='navElements me-4 mb-1'>
                <Link to={'/expenses'} style={{textDecoration:'none',color:'white'}}>Expenses</Link>
              </Nav.Link>

              <div className="container ps-0 " style={{backgroundColor:'transparent',width:'50%'}}>
                <hr style={{color:'white',height:'3px'}}/>
              </div>  

              <Nav.Link  className='navElements me-4 mb-1'>
                <Link to={'/savings'} style={{textDecoration:'none',color:'white'}}>Savings</Link>
              </Nav.Link>

              <div className="container ps-0 " style={{backgroundColor:'transparent',width:'50%'}}>
                <hr style={{color:'white',height:'3px'}}/>
              </div>  

          </Nav>
          <Nav className='navElements text-center  mt-2' >
            <div className='action-button' style={{backgroundColor:"transparent",marginLeft:'-20px'}}>
              <button className='btn border border-1 ps-3 pe-3 pt-2 pb-2 ms-0' onClick={handleLogout} style={{backgroundColor:'transparent'}}>Logout</button>
            </div>
          </Nav> 
        
        
        </Navbar.Collapse></> ) 
      } 
      </Container>
    </Navbar>
        </div>
        <div className="col-sm-2">
        <Navbar.Collapse id="basic-navbar-nav">
        <Nav className='ms-auto ' >
            <div className='logout-button' style={{backgroundColor:"transparent"}}>
              <button className='btn border border-1 ps-3 pe-3 pt-2 pb-2' onClick={handleLogout} >Logout</button>
            </div>
        </Nav>
        </Navbar.Collapse> 
      
        </div>
      </div>

      
    </>
  )
}

export default Header
